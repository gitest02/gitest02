<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="V_SRM_001" classname="V_SRM_001" left="0" top="0" width="1000" height="600" titletext="New Form">
    <Layouts>
      <Layout>
        <Static id="Static00" taborder="0" text="응소(제소)보고 관리" left="1%" top="0" right="1%" height="42" style="background:transparent URL('theme://images\bg_Cal_click.png') stretch;color:whitesmoke;padding:0 0 0 10;font:bold 12 굴림;"/>
        <Div id="Div00" taborder="1" text="Div00" left="0%" top="51" right="0%" height="550">
          <Layouts>
            <Layout>
              <Static id="Static00" taborder="0" onclick="Div00_Static00_onclick" left="1%" top="0" right="1%" height="37" style="background:lavenderblush;border:1 solid #c8c8c8ff ;color:#080808ff;font:bold 9 굴림;"/>
              <Button id="Button00" taborder="3" text="검색" onclick="Div00_Button00_onclick" left="30.6%" top="8" width="70" height="20" style="background:@gradation URL('theme://images\btn_TF_Search.png') 10px 50px;"/>
              <Button id="reset_btn" taborder="4" text="초기화" onclick="reset_btn_onclick" left="90.6%" top="9" width="70" height="20" style="background:@gradation URL('theme://images\btn_MF_Refresh_O.png') 5px 50px;" visible="false"/>
              <Static id="Static02" taborder="5" text="소송기본사항" left="1.1%" top="44" right="85.8%" height="23"/>
              <Static id="Static03" taborder="6" onclick="Div00_Static00_onclick" left="1%" top="70" right="1%" height="129" style="background:lavenderblush;border:1 solid #c8c8c8ff ;color:#080808ff;font:bold 9 굴림;"/>
              <Combo id="cb_searchLawClassName" taborder="12" value="== 전체 ==" type="dropdown" onitemchanged="div_search_cb_searchLawClassName_onitemchanged" left="80.5%" top="75" width="17.1%" height="29" enable="false"/>
              <Static id="Static01" taborder="13" text="소송관리번호" left="1.9%" top="6" right="84%" height="24" style="background:#f4edfaff;border:1 solid #c8c8c8ff ;padding:0 0 0 0;align:center middle;"/>
              <Edit id="Edit00" taborder="14" oneditclick="Div00_Edit00_oneditclick" left="16.3%" top="6" right="70.3%" height="25" enable="false"/>
              <Static id="Static04" taborder="15" text="소제기의뢰번호" left="1.9%" top="80" right="84%" height="24" style="background:#f4edfaff;border:1 solid #c8c8c8ff ;padding:0 0 0 0;align:center middle;"/>
              <Edit id="Edit01" taborder="16" oneditclick="Div00_Edit00_oneditclick" left="16.4%" top="79" right="70.2%" height="25" enable="false"/>
              <Static id="Static05" taborder="18" text="신청사건번호" left="30.4%" top="80" right="51.8%" height="24" style="background:#f4edfaff;border:1 solid #c8c8c8ff ;padding:0 0 0 0;align:center middle;"/>
              <Static id="Static06" taborder="19" text="사건유형" left="64%" top="80" right="20.3%" height="25" style="background:#f4edfaff;border:1 solid #c8c8c8ff ;padding:0 0 0 0;align:center middle;"/>
              <Static id="Static07" taborder="21" text="신청법원" left="1.9%" top="109" right="84%" height="24" style="background:#f4edfaff;border:1 solid #c8c8c8ff ;padding:0 0 0 0;align:center middle;"/>
              <Static id="Static08" taborder="23" text="당사원피고구분" left="30.5%" top="109" right="51.8%" height="24" style="background:#f4edfaff;border:1 solid #c8c8c8ff ;padding:0 0 0 0;align:center middle;"/>
              <Static id="Static09" taborder="24" text="피고" left="64%" top="109" right="20.3%" height="25" style="background:#f4edfaff;border:1 solid #c8c8c8ff ;padding:0 0 0 0;align:center middle;"/>
              <Static id="Static10" taborder="27" text="소송제기사유" left="1.8%" top="137" right="84.1%" height="57" style="background:#f4edfaff;border:1 solid #c8c8c8ff ;padding:0 0 0 0;align:center middle;"/>
              <TextArea id="TextArea00" taborder="28" left="16.3%" top="136" right="2.4%" height="58" enable="true" wordwrap="char" enableevent="true" readonly="true"/>
              <Static id="Static11" taborder="29" text="의견등록" left="1.3%" top="200" right="87%" height="32"/>
              <Static id="Static12" taborder="30" onclick="Div00_Static00_onclick" left="1%" top="230" right="1%" height="179" style="background:lavenderblush;border:1 solid #c8c8c8ff ;color:#080808ff;font:bold 9 굴림;"/>
              <Static id="Static13" taborder="31" text="쟁점사항" left="1.9%" top="237" right="84%" height="57" style="background:#f4edfaff;border:1 solid #c8c8c8ff ;padding:0 0 0 0;align:center middle;"/>
              <TextArea id="TextArea01" taborder="32" left="16.4%" top="237" right="2.4%" height="58" scrollbars="autoboth" wordwrap="char"/>
              <Static id="Static14" taborder="33" text="의뢰내용" left="1.9%" top="303" right="84%" height="70" style="background:#f4edfaff;border:1 solid #c8c8c8ff ;padding:0 0 0 0;align:center middle;"/>
              <TextArea id="TextArea02" taborder="34" left="16.4%" top="300" right="2.4%" height="75" wordwrap="char"/>
              <Static id="Static15" taborder="35" text="보고일자" left="2%" top="378" right="83.9%" height="24" style="background:#f4edfaff;border:1 solid #c8c8c8ff ;padding:0 0 0 0;align:center middle;"/>
              <Static id="Static16" taborder="37" left="0.9%" top="443" right="85%" height="34" style="background:#f4edfaff;border:1 solid #c8c8c8ff ;padding:0 0 0 0;align:center middle;"/>
              <Static id="Static17" taborder="38" left="14.8%" top="443" right="71.1%" height="34" style="background:#f4edfaff;border:1 solid #c8c8c8ff ;padding:0 0 0 0;align:center middle;"/>
              <Static id="Static18" taborder="39" left="28.8%" top="443" right="57.1%" height="34" style="background:#f4edfaff;border:1 solid #c8c8c8ff ;padding:0 0 0 0;align:center middle;"/>
              <Static id="Static19" taborder="40" left="0.9%" top="476" right="85%" height="34" style="background:transparent;border:1 solid #c8c8c8ff ;padding:0 0 0 0;align:center middle;"/>
              <Static id="Static20" taborder="41" left="28.8%" top="476" right="57.1%" height="34" style="background:transparent;border:1 solid #c8c8c8ff ;padding:0 0 0 0;align:center middle;"/>
              <Static id="Static21" taborder="42" left="14.8%" top="476" right="71.1%" height="34" style="background:transparent;border:1 solid #c8c8c8ff ;padding:0 0 0 0;align:center middle;"/>
              <Button id="approval_btn" taborder="43" text="결재" onclick="approval_btn_onclick" left="73.9%" top="496" width="70" height="20" style="background:@gradation 10px 50px;" visible="false"/>
              <Button id="save_btn" taborder="44" text="저장" onclick="save_btn_onclick" left="81.9%" top="496" width="70" height="20" style="background:@gradation 10px 50px;" visible="false"/>
              <Button id="close_btn" taborder="45" text="닫기" onclick="close_btn_onclick" left="90.1%" top="496" width="70" height="20" style="background:@gradation 10px 50px;" visible="false"/>
              <Edit id="Edit02" taborder="46" oneditclick="Div00_Edit00_oneditclick" left="48.8%" top="78" right="36.5%" height="26" enable="false"/>
              <Combo id="Combo00" taborder="47" left="16.3%" top="108" right="70.2%" height="24"/>
              <Combo id="Combo01" taborder="48" left="48.8%" top="107" right="36.5%" height="25"/>
              <Edit id="Edit03" taborder="49" left="80.5%" top="108" right="2.4%" height="25" enable="false"/>
              <Calendar id="Calendar00" taborder="50" left="16.4%" top="378" right="65.1%" height="25"/>
              <Static id="Static22" taborder="51" text="*" left="5%" top="255" right="93.4%" height="23" style="color:red;"/>
              <Static id="Static23" taborder="52" text="*" left="5%" top="326" right="93.4%" height="23" style="color:red;"/>
              <Static id="Static24" taborder="53" text="*" left="5%" top="375" right="93.4%" height="23" style="color:red;"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static01" taborder="2" text="결재 진행 상태" left="1%" top="462" right="86.4%" height="37"/>
        <Edit id="Edit00" taborder="3" left="0%" top="608" right="74.4%" height="70" visible="false"/>
        <Edit id="Edit01" taborder="4" left="29.1%" top="606" right="52.8%" height="32" visible="false"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_lawsuit">
        <ColumnInfo>
          <Column id="lawsuitAdmNo" type="STRING" size="256"/>
          <Column id="lawRaisreqNo" type="STRING" size="256"/>
          <Column id="lawsuitAplCortCode" type="STRING" size="256"/>
          <Column id="lawsuitAplCaseCode" type="STRING" size="256"/>
          <Column id="lawsuitCaseTyCode" type="STRING" size="256"/>
          <Column id="lawsuitCpPladefSepcode" type="STRING" size="256"/>
          <Column id="lawsuitAsitParcWtr" type="STRING" size="256"/>
          <Column id="lawsuitCtaWtr" type="STRING" size="256"/>
          <Column id="lawsuitCtaNo" type="STRING" size="256"/>
          <Column id="lawsuitCtaCaseNo" type="STRING" size="256"/>
          <Column id="lawsuitCtaChg" type="STRING" size="256"/>
          <Column id="lawsuitTempReqiDate" type="STRING" size="256"/>
          <Column id="lawsuitRaisRea" type="STRING" size="256"/>
          <Column id="lawsuitCostCfnApldate" type="STRING" size="256"/>
          <Column id="lawsuitConcDate" type="STRING" size="256"/>
          <Column id="lawsuitFulfDetmWtr" type="STRING" size="256"/>
          <Column id="pladefName" type="STRING" size="256"/>
          <Column id="lawsuitNotiAdmNo" type="STRING" size="256"/>
          <Column id="lawsuitNotiCont" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_search">
        <ColumnInfo>
          <Column id="lawsuitAdmNo" type="STRING" size="256"/>
          <Column id="instAdmCode" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_ales_sue">
        <ColumnInfo>
          <Column id="lawsuitAdmNo" type="STRING" size="256"/>
          <Column id="alesSueIssuPoin" type="STRING" size="256"/>
          <Column id="alesSueReqCont" type="STRING" size="256"/>
          <Column id="alesSueRepoDate" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item0" compid="Div00.Edit00" propid="value" datasetid="ds_lawsuit" columnid="lawsuitAdmNo"/>
      <BindItem id="item1" compid="Div00.Edit01" propid="value" datasetid="ds_lawsuit" columnid="lawRaisreqNo"/>
      <BindItem id="item2" compid="Div00.Edit02" propid="value" datasetid="ds_lawsuit" columnid="lawsuitAplCaseCode"/>
      <BindItem id="item3" compid="Div00.cb_searchLawClassName" propid="value" datasetid="ds_lawsuit" columnid="lawsuitCaseTyCode"/>
      <BindItem id="item4" compid="Div00.Combo00" propid="value" datasetid="ds_lawsuit" columnid="lawsuitAplCortCode"/>
      <BindItem id="item5" compid="Div00.Combo01" propid="value" datasetid="ds_lawsuit" columnid="lawsuitCpPladefSepcode"/>
      <BindItem id="item6" compid="Div00.Edit03" propid="value" datasetid="ds_lawsuit" columnid="pladefName"/>
      <BindItem id="item7" compid="Div00.TextArea00" propid="value" datasetid="ds_lawsuit" columnid="lawsuitRaisRea"/>
      <BindItem id="item8" compid="Div00.TextArea01" propid="value" datasetid="ds_ales_sue" columnid="alesSueIssuPoin"/>
      <BindItem id="item9" compid="Div00.TextArea02" propid="value" datasetid="ds_ales_sue" columnid="alesSueReqCont"/>
      <BindItem id="item10" compid="Div00.Calendar00" propid="value" datasetid="ds_ales_sue" columnid="alesSueRepoDate"/>
      <BindItem id="item11" compid="Edit00" propid="value" datasetid="ds_lawsuit" columnid="lawsuitNotiCont"/>
      <BindItem id="item12" compid="Edit01" propid="value" datasetid="ds_lawsuit" columnid="lawsuitNotiAdmNo"/>
    </Bind>
    <Script type="xscript5.0"><![CDATA[include "Lib::Comm.xjs";

this.Div00_Button00_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var objChildFrame = new ChildFrame();
    objChildFrame.init("chf_popup2", "absolute", 30, 30, 30, 30, null, null, "Pattern::V_PDL_026.xfdl");
    var objParam = {};
    objChildFrame.showModal(this.getOwnerFrame(), objParam, this, "fn_popupCallback");
}

this.fn_popupCallback = function(strID, strTemp)
{
	this.Div00.reset_btn.set_visible(true);
	this.Div00.approval_btn.set_visible(true);
	this.Div00.save_btn.set_visible(true);
	this.Div00.close_btn.set_visible(true);
	
	var strTempSplit = strTemp.split("/");
	if(strTemp != undefined){
		this.ds_search.setColumn(0, "lawsuitAdmNo", strTempSplit[0]);
		this.ds_search.setColumn(0, "instAdmCode", strTempSplit[1]);
		this.getLawsuitInfo();
		this.getAlesSueInfo();
		
	}
}

this.getLawsuitInfo = function() {
	var oDatas =  {
		  svcid : "lawSuitInfo",
		  sController : "getPrgrLawsuitInfo.do",
		  inds :["ds_search=ds_search"],
		  outds :["ds_lawsuit=ds_lawsuit"],
		  args  : [],
		  bAsync : true,
		  nDataType : 0,
		  bCompress :false,
	};
	
	//트랜젝션 콜백함수 이용
	Iject.transaction(this,oDatas,function(){
 		
 		if(this.errorcode < 0){
		   Iject.alert(this.errormsg);
		   return false;
			}
		else{
			var pThis = this.fobj;
			var lawsuitCpPladefSepcode = pThis.Div00.Combo01.text;
			var lawsuitNotiCont = pThis.Edit00.text;
			var lawsuitNotiAdmNo = pThis.Edit01.text;
			
			if(lawsuitCpPladefSepcode != "피고")
			{
				pThis.Static00.set_text("제소보고");
				pThis.Div00.Static04.set_text("소송의뢰번호");
				pThis.Div00.Static10.set_text("소송제기사유");
				pThis.Div00.Static09.set_text("피고");
				
			}
			else
			{
				pThis.Static00.set_text("응소보고");
				pThis.Div00.Static04.set_text("소송고지번호");
				pThis.Div00.Static10.set_text("고지내용");
				pThis.Div00.Static09.set_text("원고");
				if(lawsuitNotiCont != "")
				{
					pThis.Div00.Edit01.set_value(lawsuitNotiAdmNo);
					pThis.Div00.TextArea00.set_value(lawsuitNotiCont);
				}
				
			}
			
		}
	});
}

this.getAlesSueInfo = function(){
	var oDatas =  {
		  svcid : "alesSueInfo",
		  sController : "getAlesSueInfo.do",
		  inds :["ds_search=ds_search"],
		  outds :["ds_ales_sue=ds_ales_sue"],
		  args  : [],
		  bAsync : true,
		  nDataType : 0,
		  bCompress :false,
	};

	Iject.transaction(this,oDatas,function(){
 		
 		if(this.errorcode < 0){
		   
		   Iject.alert(this.errormsg);
		   return false;
		}
		
		else{
			var pThis = this.fobj;
			if(pThis.Div00.TextArea01.text == "" && pThis.Div00.TextArea02.text == "" && pThis.Div00.Calendar00.text == "")
			{
				pThis.ds_ales_sue.insertRow(0);
			}
		}
 		
 		
	});
	
}


this.reset_btn_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.ds_lawsuit.deleteAll();
	this.ds_ales_sue.deleteAll();
	this.Div00.reset_btn.set_visible(false);
	this.Div00.approval_btn.set_visible(false);
	this.Div00.save_btn.set_visible(false);
	this.Div00.close_btn.set_visible(false);
}

this.save_btn_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{

	this.ds_ales_sue.setColumn(0, "lawsuitAdmNo", this.ds_lawsuit.getColumn(0, "lawsuitAdmNo"));
	var alesSueIssuPoin = this.ds_ales_sue.getColumn(0, "alesSueIssuPoin");
	var alesSueReqCont = this.ds_ales_sue.getColumn(0, "alesSueReqCont");
	var alesSueRepoDate = this.ds_ales_sue.getColumn(0, "alesSueRepoDate");
	
	if(alesSueIssuPoin == "" || alesSueIssuPoin == null)
	{
		alert("쟁점사항을 입력해주세요");
		return;
	}
	
	if(alesSueReqCont == "" || alesSueReqCont == null)
	{
		alert("의뢰내용을 입력해주세요");
		return;
	}
	
	if(alesSueRepoDate == "" || alesSueRepoDate == null)
	{
		alert("보고날짜를 입력해주세요");
		return;
	}
	
	var oDatas =  {
		  svcid : "alesSueChange",
		  sController : "getAlesSueChange.do",
		  inds :["ds_ales_sue=ds_ales_sue:U"],
		  outds :[],
		  args  : [],
		  bAsync : true,
		  nDataType : 0,
		  bCompress :false,
	};

	Iject.transaction(this,oDatas,function(){
 		var pThis = this.fobj;
	});
	
	alert("저장되었습니다");
}

this.close_btn_onclick = function(obj:Button, e:nexacro.ClickEventInfo)
{
	this.close("OK");
}

this.approval_btn_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	//결제기능
}

]]></Script>
  </Form>
</FDL>
